<script type="text/template" id="info-button-template">
	<button title="View infographic" class="button button-default ig-icon viewCrsInfoGraphicIcon">
		<img src="plugins/natural_coastal_protection/InfographicIcon_v1_23x23.png" alt="show overview graphic">
	</button>
</script>

<script type="text/template" id="plugin">

<style>

	.ig-icon {
	    padding: 2px !important;
	    height: 28px;
	    position: absolute;
	    top: 6px;
	    margin-left: -8px;
	}

	.ncp-plugin {
		-moz-user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
		user-select:none;
		line-height: 16px;
		overflow-x: hidden;
	}

	section {
		border-bottom: none !important;
	}

	section.header {
		padding: 10px;
		padding-top: 0;
	}

	section.header h3 {
		text-align: center;
		line-height: 2;
	}

	section.header .toggle-controls-container {
		text-align: center;
	    margin-bottom: 10px;
	}

	section.country {
		float: left;
		width: 65%;
		height: 196px;
		padding: 10px;
		background-color: #ececec;
	}

	section.documents {
		float: left;
		width: 35%;
		height: 196px;
		padding: 10px;
		background-color: #cdd5d5;
	}

	section.documents button {
		position: relative;
		width: 131px;
		padding-left: 8px;
	    padding-right: 8px;
	    font-size: 12px;
	    text-align: center;
	}

	section.country button {
		text-align: left;
	}

	/* Checkboxes */

	.ncp-plugin input[type=radio]{
	  position: absolute;
	  visibility: hidden;
	}

	.ncp-plugin .check-group {
		position: relative;
		display: block;
	    width: 38px;
	    height: 20px;
	    text-align: left;
	}
	
	.ncp-plugin .storm-buttons-container .radio-padding {
		margin-top: 10px;
	}

	.ncp-plugin .storm-buttons-container .check-group.annual {
		margin-top: 6px;
	}

	.ncp-plugin .storm-buttons-container .check-group.annual label {
		width: 140px;
	}

	.ncp-plugin .check-group:hover label {
		color: #306692;
	}

	.ncp-plugin .radio-select{
	  position: absolute;
	  display: block;
	  top: 2px;
	  left: 14px;
	  border: 2px solid #306692;
	  border-radius: 100%;
	  height: 12px;
	  width: 12px;
	  z-index: 5;
	  transition: border .25s linear;
	  -webkit-transition: border .25s linear;
	}

	.ncp-plugin .storm-buttons-container .annual .radio-select {
		top: -2px;
	}

	.ncp-plugin .radio-select::before {
	  display: block;
	  position: absolute;
	  left: 1px;
	  top: 1px;
	  content: '';
	  border-radius: 100%;
	  height: 6px;
	  width: 6px;
	  margin: auto;
	  transition: background 0.25s linear;
	  -webkit-transition: background 0.25s linear;
	}

	.ncp-plugin input[type=radio]:checked ~ .radio-select::before{
	  background:#306692;
	}

	.ncp-plugin input[type=radio]:checked ~ .check {
	  border: 1px solid #306692;
	}

	.ncp-plugin input[type=radio]:checked ~ label{
	  color: #306692;
	}

	/* End Checkboxes */

	.ncp-plugin .clearfix {
		overflow: auto;
  		zoom: 1;
	}

	.ncp-plugin .controls-container {
		padding: 10px 8px;
		background-color: #f3f4f3;
	}

	.ncp-plugin .storm-buttons-container {
		float: left;
		width: 250px;
	}

	.ncp-plugin .info-tooltip {
		color: #226491;
		vertical-align: middle;
		z-index: 101;
	}

	.ncp-plugin .stat .info-tooltip {
		float: right;
		padding-left: 2px;
		margin-top: -4px;
		background-color:  #fff;
		z-index: 101;
	}

	.ncp-plugin .styled-select {
		position: relative;
		width: 150px;
		height: 36px;
		overflow: hidden;
		border: 2px solid #aaaaaa;
		border-radius: 4px;
		background-color: #fff;
		cursor: pointer;
	}

	.ncp-plugin .styled-select::after {
		display: block;
		position: absolute;
		right: 5px;
    	top: 8px;
		content: '\f078';
		color: #999;
		font-family: FontAwesome;
		pointer-events: none;
	}

	.ncp-plugin .styled-select select {
		background: transparent;
		width: 168px;
		padding: 5px;
		line-height: 1;
		border: 0;
		border-radius: 0;
		color: #333333;
		height: 32px;
		-moz-appearance: none;
		-webkit-appearance: none;
		appearance: none;
		cursor: pointer;
	}

	.ncp-plugin .styled-select select optgroup,
	.ncp-plugin .styled-select select option {

	}

	.ncp-plugin .download-summary {
		display: block;
		margin-top: 12px;
	    margin-left: 1px;
	    margin-right: 6px;
	    margin-bottom: 6px;
	    color: #fff !important;
	    cursor: pointer;
	    border: 1px solid #226491;
	    border-radius: 4px;
	    padding: 4px;
	    background-color: #226491;
	    text-align: center;
	    box-shadow: 2px 2px 5px 1px rgba(34,100,145, 0.2);
	    transition: box-shadow 0.2s;
    }

    .ncp-plugin .download-summary:active {
    	color: #fff;
		-webkit-transform: scale(0.9) translateY(4px);
		-moz-transform: scale(0.9) translateY(4px);
		-ms-transform: scale(0.9) translateY(4px);
		-o-transform: scale(0.9) translateY(4px);
		transform: scale(0.9) translateY(4px);
		background: darken(#226491, 5%);
    }

	.ncp-plugin .a:visited {
		color: #fff !important;
		outline: none;
	}

	.ncp-plugin .download-summary:hover {
		color: #fff;
		background: darken(#226491, 5%);
		-webkit-transition: all 0.05s ease;
		-moz-transition: all 0.05s ease;
		-ms-transition: all 0.05s ease;
		-o-transition: all 0.05s ease;
		transition: all 0.05s ease;
	}
    .ncp-plugin .stats-description {
    	padding: 8px;
    	clear: both;
    }



    .ncp-plugin .stats-container {
		margin: auto;
	}

	.ncp-plugin .stat {
		height: 45px;
    	padding-top: 15px;
		border-bottom: 1px solid #ccc;
	}

	.ncp-plugin .stat .description,
	.ncp-plugin .stat .number {
		display: inline-block;
		cursor: pointer;
		text-align: left;
		transition: color 0.35s linear;
		vertical-align: middle;
	}

	.ncp-plugin .stat:last-child {
		border: none;
	}

	.ncp-plugin .stat .number {
		width: 160px;
		padding-left: 14px;
		font-size: 30px;
	    font-weight: bold;
	    color: #d8d8d8;
	}

	.ncp-plugin .stat .units {
		font-size: 22px;
	}

	.ncp-plugin .stat.active .description,
	.ncp-plugin .stat.active .number,
	.ncp-plugin .stat:hover .description,
	.ncp-plugin .stat:hover .number {
		color: #438c9d;
	}

	.ncp-plugin .stat .description {
	    padding-left: 10px;
		color: #d8d8d8;
	    font-size: 18px;
	    transition: color 0.35s linear;
	    width: calc(100% - 174px);
	}

	.ncp-plugin .coral-select-container,
	.ncp-plugin .mangrove-select-container {
		float: left;
	    width: 250px;
	    text-align: left;
	    margin-top: 6px;
	    clear: left;
	}

	.ncp-plugin .coral-select-container input[type=checkbox],
	.ncp-plugin .moral-select-container input[type=checkbox] {
	  /* Double-sized Checkboxes */
	    margin-top: 1px;
		-ms-transform: scale(1.2);
		-moz-transform: scale(1.2);
		-webkit-transform: scale(1.2);
		-o-transform: scale(14);
		padding: 10px;
	}

	.ncp-plugin .coral-select-container span,
	.ncp-plugin .mangrove-select-container span {
		margin-left: 8px;
		font-weight: 600;
	}

	.ncp-tooltip {
		color: #333;
		border: 1px solid #7EABCD;
		background-color:  #fff;
		padding: 5px;
		border-radius: 5px;
	}

	/* Chart SVG Styles */

	.ncp-plugin .chartContainer {
		background: #f3f4f3;
		text-align: center;
	}

	.ncp-plugin path {
		stroke: #3e6f6a;
		stroke-width: 2px;
		fill: none;
	}

	.ncp-plugin .tick line {
		stroke: #333;
	}

	.ncp-plugin .tick.current {
		font-weight: bold;
	}

	.ncp-plugin .points-current circle {
		fill: #333;
	}

	.ncp-plugin path.scenario {
		stroke: #8e1212;
	}

	.ncp-plugin .points-scenario circle {
		fill: #333;
	}

	.ncp-plugin .area-current {
	    fill: #30928D;
	    stroke-width: 0;
	}

	.ncp-plugin .area-scenario {
	    fill: #923034;
	    stroke-width: 0;
	}

	.ncp-plugin .area.scenario {
	    fill: #923034;
	    stroke-width: 0;
	}

	.ncp-plugin .xaxis-label,
	.ncp-plugin .yaxis-label {

	}
	.ncp-plugin .xaxis path,
	.ncp-plugin .yaxis path {
		fill: none;
		stroke: #ccc;
		stroke-width: 1px;
		shape-rendering: crispEdges;
	}

	.ncp-plugin .bar {
		fill: #923034;
	}

	.ncp-plugin .bar[data-layer="Present"],
	.ncp-plugin .bar[data-layer="Current (2010) Mangroves"] {
		fill: #30928D;
	}

	.ncp-plugin .world-bank-report {
		text-align: right;
		margin-top: -6px;
		margin-right: 8px;
	}

	.custom-legend .legend-item {
		width: 15px;
	    height: 10px;
	    display: inline-block;
	    margin-right: 5px;
	}

	/* Disable Chosen */
	.chosen-disabled {
		opacity: 1 !important;
	}

	.chosen-disabled .chosen-single {

		border: none !important;
    	box-shadow: none !important;
	}

	.chosen-disabled b {
		display: none !important;
	}

	/* */

	.toggle-option {
		line-height: 28px;
    	vertical-align: top;
	}

	.switch {
	  position: relative;
	  display: inline-block;
	  margin-left: 5px;
	  margin-right: 5px;
	  width: 50px;
	  height: 25px;
	}

	/* Hide default HTML checkbox */
	.switch input {display:none;}

	/* The slider */
	.slider {
	  position: absolute;
	  cursor: pointer;
	  top: 0;
	  left: 0;
	  right: 0;
	  bottom: 0;
	  background-color: #438c9d;
	  -webkit-transition: .4s;
	  transition: .4s;
	}

	.slider:before {
	  position: absolute;
	  content: "";
	  height: 19px;
	  width: 19px;
	  left: 2px;
	  bottom: 3px;
	  background-color: white;
	  -webkit-transition: .4s;
	  transition: .4s;
	}

	input:checked + .slider:before {
	  -webkit-transform: translateX(26px);
	  -ms-transform: translateX(26px);
	  transform: translateX(26px);
	}

	/* Rounded sliders */
	.slider.round {
	  border-radius: 34px;
	}

	.slider.round:before {
	  border-radius: 50%;
	}

</style>

	<div class="ncp-plugin">
		<section class="header">
	    	<h3>Flood Protection</h3>
	    	<div class="toggle-controls-container">
	    		<span class="toggle-option">Coral Reefs</span>
	    		<label class="switch">
				  	<input id="ncp-provider" type="checkbox">
				  	<span class="slider round"></span>
				</label>
	    		<span class="toggle-option">Mangroves</span>
	    	</div>

		    <div>
		    	Estimates of the benefits provided by <span class="coral-only">coral reefs</span><span class="mangrove-only" style="display: none;">mangroves</span> in flood protection annually and from catastrophic storms
		    </div>
	    </section>
	    <section class="country">

		    <div class="chosen-wrap" style="width: 160px; margin-bottom:10px;">
				<select id="ncp-select-region" class="chosen">
					<% _.each(regionsCoral, function(val, key) { %>
	    				<option class="coral" value="<%= key %>" <% if (key === "Global") { %> selected <% } %>><%= key %></option>
	    			<% }); %>
	    			<% _.each(regionsMangrove, function(val, key) { %>
	    				<option style="display: none;" class="mangrove" value="<%= key %>" <% if (key === "Global") { %> selected <% } %>><%= key %></option>
	    			<% }); %>
				</select>
			</div>


	    	<div class="storm-buttons-container">

	    		<label class="form-component ann-exp-benefit" for="ANN-option">
                    <input checked="checked" type="radio" id="ANN-option" value="ANN" name="storm<%=pane%>">
                    <div class="check"></div>
                    <span class="form-text">Annual Expected Benefit <i title="Annual expected benefits from reefs for flood protection  represents the predicted flooding avoided to land, people, and infrastructure by keeping coral reefs intact. It is an annualized benefit of the role of reefs in flood reduction that considers local factors such as reef condition, asset distribution, and storm frequency." class="fa fa-info-circle info-annual info-tooltip"></i></span>
                </label>

	    		<div class="benefits-from-storm" style="padding-left: 1px;">
					<span class="control-title" style="margin-bottom: 4px; display: inline-block;">
						Benefits from Catastrophic Storms
						<i title="30 years of historical data on regional sea level and wave conditions were used to develop a frequency distribution of storm sea levels and their intensity to estimate flooding for 1 in 10, 25, 50, and 100 year storm events." class="fa fa-info-circle info-period info-tooltip"></i>
					</span>

					<label id="rp25" class="form-component" for="RP25-option">
	                    <input checked="checked" type="radio" id="RP25-option" value="25RP" name="storm<%=pane%>">
	                    <div class="check"></div>
	                    <span class="form-text">1 in 25-year storm</span>
	                </label>

	                <label id="rp50" style="display: none" class="form-component" for="RP50-option">
	                    <input checked="checked" type="radio" id="RP50-option" value="50RP" name="storm<%=pane%>">
	                    <div class="check"></div>
	                    <span class="form-text">1 in 50-year storm</span>
	                </label>

	    			<label id="rp100" class="form-component" for="RP100-option">
	                    <input checked="checked" type="radio" id="RP100-option" value="100RP" name="storm<%=pane%>">
	                    <div class="check"></div>
	                    <span class="form-text">1 in 100-year storm</span>
	                </label>
		    	</div>
	    	</div>

	    	<div class="coral-select-container">
		    	<label class="form-component" for="coral-option">
                    <input type="checkbox" id="coral-option">
                    <div class="check"></div>
                    <span class="form-text">View Coral Reef Habitats</span>
                </label>
		    </div>

		    <div style="display: none;" class="mangrove-select-container">
		    	<label class="form-component" for="mangrove-option">
                    <input type="checkbox" id="mangrove-option">
                    <div class="check"></div>
                    <span class="form-text">View Mangrove Habitats</span>
                </label>
		    </div>

    	</section>

    	<section class="documents">
    		<span class="control-title" style="display: block; margin-bottom: 3px;">Documents:</span>
    		<button class="button button-default js-getSnapshot" target="_blank" style="display: none">Print<br>Country Summary</button>
    		
    		<a class="js-global coral-only" href="https://www.wavespartnership.org/sites/waves/files/kc/Technical%20Rept%20WAVES%20Coastal%202-11-16%20web.pdf" target="_blank">
				<button class="button button-default">Download<br>Coral Reef Waves</span> Report</button>
			</a>
			<a class="js-global mangrove-only" style="display: none;" href="http://conservationgateway.org/ConservationPractices/Marine/crr/library/Documents/CoastalProtectionServicesMangrovesPhilippinesReport-3.pdf" target="_blank">
				<button class="button button-default">Download<br>Mangroves Waves</span> Report</button>
			</a>

    	</section>

	    <section class="stats-description">The people and property protected by <span class="coral-only">coral reefs</span><span class="mangrove-only" style="display: none;">mangroves</span> (values represent predicted losses avoided by keeping <span class="coral-only">coral</span><span class="mangrove-only" style="display: none;">mangroves</span> intact)</section>

	    <div class="stats-container">

	    	<div class="stat people active" data-layer="people">
	    		<div class="number"><span class="variable"><%= global.E2E1_DIF_ANN_PF %></span></div>
	    		<div class="description">People Protected
	    			<i title="This value represents the difference of flooding impacts on people when coral reefs are present and when there is 1 meter of reef loss. This value is aggregated to the country scale from 90m resolution data." class="fa fa-info-circle info-people info-tooltip"></i></div>
	    	</div>

	    	<div class="stat capital" data-layer="capital">
	    		<div class="number">$<span class="variable"><%= global.E2E1_DIF_ANN_BCF %></span><span class="units">M</span></div>
	    		<div class="description"> Built Capital Protected
	    			<i title="This value represents the difference of flooding impacts on built capital when coral reefs are present and 
					when there is 1 meter of reef loss. This value is aggregated
					to the country scale from 90m resolution data." class="fa fa-info-circle info-capital info-tooltip"></i></div>
	    		
	    	</div>

	    	<div class="stat area" data-layer="area">
	    		<div class="number"><span class="variable"><%= global.E2E1_DIFF_ANN_AF %></span><span class="units">km<sup>2</sup></span></div>
	    		<div class="description">Area Protected
	    			<i title="This value represents the difference of flooding impacts on land area when coral reefs are present and when there is 1 meter of reef loss. This value is aggregated to the country scale from 90m resolution data. " class="fa fa-info-circle info-area info-tooltip"></i></div>

	    	</div>

	    </div>

	    <section class="chartContainer">

	    </section>
	</div>

</script>